<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>答辩很烦</title>
    <script type="text/javascript" src="../static/jquery-1.12.4.js"></script>
    <script type="text/javascript" src="../static/echarts.min.js"></script>
</head>
<body>
<div id="main" style="width: 600px;height:400px;"></div>

<script type="text/javascript">
    alert("adasdashello");
    var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: 'ECharts 入门示例'
            },
            tooltip: {},
            legend: {
                data:['销量']
            },
            xAxis: {
                data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
            },
            yAxis: {},
            series: [{
                name: '销量',
                type: 'bar',
                data: [5, 20, 36, 10, 10, 20]
            }]
        };

   	$.ajax({
		url : "/caonima",
		type : "GET",
		dataType : "JSON",
		data: {},
		contentType : "application/json",
		success : function(data) {//这里得到后台Java响应的json数据,即resultJsonMapData
		    var myChart = echarts.init(document.getElementById('main'));
		    var data1 =  $.parseJSON(data); //此处代码很关键，后台返回的JSON字符串数据ECharts是无法直接解析的，必须
                                                    //解析一下，使他变成JSON对象（JS对象），ECharts才能操作该数据。

		    var option = {
                        series: [
                            {
                                name: '访问来源',
                                type: 'pie',
                                radius: '55%',
                                roseType: 'angle',
                                data: data1;
                            }
                        ]
                    };

			myChart.setOption(option);

		},
		error : function(errorMsg) {
	        //请求失败时执行该函数
			layer.msg('服务器开了点小差，请稍后刷新页面!', {icon: 0});
	        myChart.hideLoading();
	    }
	});

</script>
</body>
</html>